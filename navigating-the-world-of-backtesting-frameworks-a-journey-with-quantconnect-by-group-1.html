<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="FINA4350 Students 2023" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="Group 1 remarC, Progress Report, " />

<meta property="og:title" content="Navigating the World of Backtesting Frameworks - A Journey with QuantConnect (by &#34;Group 1&#34;) "/>
<meta property="og:url" content="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/navigating-the-world-of-backtesting-frameworks-a-journey-with-quantconnect-by-group-1.html" />
<meta property="og:description" content="Introduction In the realm of algorithmic trading, backtesting plays a crucial role in validating a trading strategy before it is deployed in the live market. For our project, we are developing and evaluating a trading strategy based on the Inverse Cramer Effect, which exploits the negative correlation between Jim Cramer&#39;s …" />
<meta property="og:site_name" content="FINA4350 Student Blog 2023" />
<meta property="og:article:author" content="FINA4350 Students 2023" />
<meta property="og:article:published_time" content="2023-04-24T10:00:00+08:00" />
<meta name="twitter:title" content="Navigating the World of Backtesting Frameworks - A Journey with QuantConnect (by &#34;Group 1&#34;) ">
<meta name="twitter:description" content="Introduction In the realm of algorithmic trading, backtesting plays a crucial role in validating a trading strategy before it is deployed in the live market. For our project, we are developing and evaluating a trading strategy based on the Inverse Cramer Effect, which exploits the negative correlation between Jim Cramer&#39;s …">

        <title>Navigating the World of Backtesting Frameworks - A Journey with QuantConnect (by &#34;Group 1&#34;)  · FINA4350 Student Blog 2023
</title>
        <link href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="FINA4350 Student Blog 2023 - Full Atom Feed" />



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/"><span class=site-name>FINA4350 Student Blog 2023</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://buehlmaier.github.io/FINA4350-student-blog-2023-01
                                    >Home</a>
                                </li>
                                <li ><a href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/categories.html">Categories</a></li>
                                <li ><a href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/tags.html">Tags</a></li>
                                <li ><a href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/navigating-the-world-of-backtesting-frameworks-a-journey-with-quantconnect-by-group-1.html">
                Navigating the World of Backtesting Frameworks - A Journey with QuantConnect (by "Group 1")
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <h2>Introduction</h2>
<p>In the realm of algorithmic trading, backtesting plays a crucial role in validating a trading strategy before it is deployed in the live market. For our project, we are developing and evaluating a trading strategy based on the Inverse Cramer Effect, which exploits the negative correlation between Jim Cramer's top and bottom picks from Mad Money. However, Selecting the right backtesting framework can be a daunting task, especially with the myriad of options available in Python. </p>
<p>In this blog post, we will explore the challenges in picking a suitable backtesting framework for our Inverse Cramer Strategy, our thought process behind choosing QuantConnect, and the development experience of using their platform. We'll consider factors such as the trade-off of event-driven vs vectorized frameworks, the learning curve, support for multi-asset portfolios, and more.</p>
<h2>The Backtesting Framework Landscape</h2>
<p>The Python ecosystem offers numerous backtesting frameworks, ranging from vectorized libraries like <a href="https://github.com/polakowo/vectorbt">vectorbt</a> to more sophisticated event-driven platforms such as <a href="https://github.com/mementum/backtrader">Backtrader</a> and <a href="https://www.quantconnect.com/">QuantConnect</a>. Choosing the right framework depends on various factors, including the desired level of complexity, speed, accuracy, and flexibility.</p>
<p>Event-driven frameworks, like <a href="https://www.quantconnect.com/">QuantConnect</a>, model the market conditions more realistically and offer greater flexibility. However, they can be slower and more complex to implement. On the other hand, vectorized frameworks are faster and easier to implement but may be less accurate and flexible due to their simplified nature.</p>
<p>Some of the backtesting frameworks suggested by the lecture notes are no longer maintained. For example, <a href="https://github.com/gbeced/pyalgotrade">PyAlgoTrade</a> has not been updated since 2018 and is no longer compatible with the latest version of Pandas. As such, we decided to explore other options.</p>
<h2>The Decision Process: Why QuantConnect?</h2>
<p>After evaluating the options, we decided on QuantConnect for several reasons:</p>
<h3>Built-in data sources</h3>
<p>For other frameworks, we would have to source and manage data from external source. Since we have discovered that the inverse Cramer strategy would require fetching data for a large universe of stocks, we decided that it would be more efficient to use a framework that provides built-in data sources, circumventing the need to set up a database.</p>
<p>QuantConnect provides free access to high-quality historical data for multiple asset classes, including equities, futures, and forex. This eliminates the need to source and manage data from external sources, which can be time-consuming and costly.</p>
<h3>Comprehensive support for multiple asset portfolios</h3>
<p>Compared to other frameworks like <a href="">backtest.py</a> which only supports the trading of a single asset at a time, QuantConnect supports the trading of multiple assets. This is crucial for our strategy, which requires us to maintain a dynamic portfolio of long/short positions.</p>
<h3>A cloud-based platform</h3>
<p>QuantConnect is a cloud-based platform that eliminates the need for local setup and provides scalable resources. This is especially useful for us as we are working on a shared project and do not want to deal with the hassle of setting up a local environment.</p>
<h3>Comprehensive backtesting reports</h3>
<p>QuantConnect provides comprehensive backtesting reports that include performance metrics, risk management, and transaction details. This allows us to evaluate the strategy's effectiveness and identify areas for improvement, without having to implement these features ourselves.</p>
<h2>Overcoming the Learning Curve with QuantConnect</h2>
<p>Initially, learning the ins and outs of QuantConnect's LEAN engine was challenging. However, the platform offers comprehensive documentation, community forums, and example algorithms that aided in overcoming the learning curve. These resources provided valuable insights into best practices, optimizing performance, and debugging.</p>
<h2>Developing an Algorithm in QuantConnect</h2>
<p>We set out to develop an algorithm exploring the Inverse Cramer Effect. Throughout the development process, QuantConnect proved to be a powerful platform. Key features included:</p>
<h3>Data handling and custom data classes</h3>
<p>Importing custom data, in our case a CSV file containing the top picks from Jim Cramer's Mad Money, was straightforward. We created a custom data class to parse the CSV file and store the data in a format that can be easily accessed by the algorithm.</p>
<div class="highlight"><pre><span></span><code><span class="n">CSV_PATH</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/Edward-choi/FINA4350/main/data/backtest/cramer_top_picks_2017-2022.csv&quot;</span>

<span class="k">class</span> <span class="nc">CramerStock</span><span class="p">(</span><span class="n">PythonData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Custom Data class for Jim Cramer&#39;s Top Picks from Mad Money from 2017-2022</span>

<span class="sd">    &gt; Date,Top5,Bottom5</span>
<span class="sd">    &gt; 2017-01-31,&quot;[&#39;M&#39;, &#39;TGT&#39;, &#39;KSS&#39;, &#39;UA&#39;, &#39;FSLR&#39;]&quot;,&quot;[&#39;AMZN&#39;, &#39;BAC&#39;, &#39;JPM&#39;, &#39;AAPL&#39;, &#39;UNH&#39;]&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Algorithm</span> <span class="o">=</span> <span class="kc">None</span>


    <span class="k">def</span> <span class="nf">GetSource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">isLiveMode</span><span class="p">):</span>
        <span class="c1"># config.SetParameter(&quot;algorithm&quot;, self.Algorithm)</span>
        <span class="k">return</span> <span class="n">SubscriptionDataSource</span><span class="p">(</span><span class="n">CSV_PATH</span><span class="p">,</span> <span class="n">SubscriptionTransportMedium</span><span class="o">.</span><span class="n">RemoteFile</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">Reader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">isLiveMode</span><span class="p">):</span>
         <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="ow">and</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()):</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">index</span> <span class="o">=</span> <span class="n">CramerStock</span><span class="p">()</span>
        <span class="n">index</span><span class="o">.</span><span class="n">Symbol</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">Symbol</span>
        <span class="n">index</span><span class="o">.</span><span class="n">Date</span> <span class="o">=</span> <span class="n">date</span>

        <span class="c1"># Parse the CSV line</span>
        <span class="n">date_str</span><span class="p">,</span> <span class="n">top5_str</span><span class="p">,</span> <span class="n">bottom5_str</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,(?![^[]*\])&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="n">index</span><span class="o">.</span><span class="n">Date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date_str</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
        <span class="n">index</span><span class="o">.</span><span class="n">Top5</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">top5_str</span><span class="p">))</span>
        <span class="n">index</span><span class="o">.</span><span class="n">Bottom5</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">bottom5_str</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Algorithm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Algorithm</span><span class="o">.</span><span class="n">Debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reader: Date </span><span class="si">{</span><span class="n">index</span><span class="o">.</span><span class="n">Date</span><span class="si">}</span><span class="s2">, Top5 </span><span class="si">{</span><span class="n">index</span><span class="o">.</span><span class="n">Top5</span><span class="si">}</span><span class="s2">, Bottom5 </span><span class="si">{</span><span class="n">index</span><span class="o">.</span><span class="n">Bottom5</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">index</span>
</code></pre></div>

<h3>Implementing universe selection and rebalancing</h3>
<p>The platform's built-in functions facilitated the creation of dynamic stock universes and periodic rebalancing.</p>
<h3>Managing risk and performance evaluation</h3>
<p>The platform provided risk management features and detailed performance metrics to assess the strategy's effectiveness, and also probability of overfitting.</p>
<h2>Encountering and Overcoming Technical Challenges</h2>
<p>During the development process, we encountered several technical and conceptual challenges. For example, we faced difficulties in handling custom data and managing the rebalancing schedule. By seeking help from the community and experimenting with alternative approaches, we were able to overcome these obstacles. These experiences have deepened our understanding of algorithmic trading.</p>
<h2>Conclusion</h2>
<p>Our journey with QuantConnect has been both rewarding and insightful. The platform met our initial criteria and proved to be a powerful tool for developing and backtesting trading strategies. While selecting the right backtesting framework ultimately depends on one's needs and preferences, we believe that QuantConnect strikes a good balance between complexity and usability. We look forward to exploring the platform further and developing more sophisticated trading strategies in the future.</p>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2023-04-24T10:00:00+08:00">Mon 24 April 2023</time>
            <h4>Category</h4>
            <a class="category-link" href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/categories.html#progress-report-ref">Progress Report</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/tags.html#group-1-remarc-ref">Group 1 remarC
                    <span class="superscript">4</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/buehlmaier/FINA4350-student-blog-2023-01" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="https://buehlmaier.github.io/FINA4350-student-blog-2023-01/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>